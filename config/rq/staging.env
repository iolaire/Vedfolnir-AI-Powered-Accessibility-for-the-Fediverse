# RQ Staging Environment Configuration

# Worker Configuration
WORKER_MODE=hybrid
RQ_WORKER_COUNT=4
RQ_WORKER_TIMEOUT=450
RQ_WORKER_MEMORY_LIMIT=384
RQ_ENABLE_INTEGRATED_WORKERS=true
RQ_ENABLE_EXTERNAL_WORKERS=true
RQ_STARTUP_DELAY=5

# Queue Configuration
RQ_DEFAULT_TIMEOUT=450
RQ_RESULT_TTL=7200
RQ_JOB_TTL=3600
RQ_HEALTH_CHECK_INTERVAL=45

# Redis Configuration
REDIS_MEMORY_THRESHOLD=0.75
RQ_FAILURE_THRESHOLD=3

# Worker Scaling (Staging)
RQ_MIN_URGENT_WORKERS=1
RQ_MAX_URGENT_WORKERS=3
RQ_MIN_HIGH_WORKERS=2
RQ_MAX_HIGH_WORKERS=4
RQ_MIN_NORMAL_WORKERS=2
RQ_MAX_NORMAL_WORKERS=4
RQ_MIN_LOW_WORKERS=1
RQ_MAX_LOW_WORKERS=2

# External Worker Configuration
RQ_EXTERNAL_URGENT_HIGH_WORKERS=1
RQ_EXTERNAL_NORMAL_WORKERS=1
RQ_EXTERNAL_LOW_WORKERS=2
RQ_EXTERNAL_WORKER_MEMORY_LIMIT=512
RQ_EXTERNAL_WORKER_TIMEOUT=900

# Logging Configuration
RQ_LOG_LEVEL=INFO
RQ_LOG_FILE=logs/rq_workers_staging.log
RQ_LOG_MAX_SIZE=10485760
RQ_LOG_BACKUP_COUNT=5
RQ_ENABLE_SYSLOG=false
RQ_ENABLE_JSON_LOGGING=true

# Monitoring Configuration
RQ_ENABLE_METRICS=true
RQ_METRICS_PORT=9090
RQ_ENABLE_HEALTH_CHECKS=true
RQ_HEALTH_CHECK_PORT=8080
RQ_ENABLE_ALERTING=true
RQ_ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/STAGING/WEBHOOK

# Scaling Configuration
RQ_ENABLE_AUTO_SCALING=true
RQ_SCALING_THRESHOLD_UP=0.8
RQ_SCALING_THRESHOLD_DOWN=0.3
RQ_SCALING_COOLDOWN=300

# Alert Thresholds (Staging)
RQ_ALERT_MEMORY_USAGE_PERCENT_THRESHOLD=85.0
RQ_ALERT_CPU_USAGE_PERCENT_THRESHOLD=80.0
RQ_ALERT_QUEUE_BACKLOG_SIZE_THRESHOLD=500
RQ_ALERT_WORKER_FAILURE_RATE_THRESHOLD=0.15

# Gunicorn Configuration
GUNICORN_WORKERS=4
GUNICORN_BIND=0.0.0.0:8000
GUNICORN_TIMEOUT=120
GUNICORN_ACCESS_LOG=logs/gunicorn_access_staging.log
GUNICORN_ERROR_LOG=logs/gunicorn_error_staging.log