<!-- Copyright (C) 2025 iolaire mcfadden. -->
<!-- This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. -->
<!-- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. -->

{% extends "base.html" %}

{% block title %}Verification Error - Vedfolnir{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card shadow">
                <div class="card-header bg-danger text-white">
                    <h4 class="mb-0 text-center">
                        <i class="fas fa-exclamation-triangle me-2"></i>Verification Error
                    </h4>
                </div>
                <div class="card-body p-4">
                    <div class="text-center mb-4">
                        <i class="fas fa-times-circle text-danger" style="font-size: 4rem;"></i>
                    </div>
                    
                    <div class="alert alert-danger" role="alert">
                        <h5 class="alert-heading">Verification Failed</h5>
                        <p class="mb-0">{{ error_message or 'Invalid or expired verification token.' }}</p>
                    </div>
                    
                    <div class="text-muted">
                        <p><strong>What happened?</strong></p>
                        <ul>
                            <li>The verification link may have expired</li>
                            <li>The verification token may be invalid</li>
                            <li>Your email may already be verified</li>
                        </ul>
                        
                        <p><strong>What you can do:</strong></p>
                        <ul>
                            <li>Request a new verification email using the form below</li>
                            <li>Check your spam folder for the original email</li>
                            <li>Contact support if you continue to have issues</li>
                        </ul>
                    </div>
                    
                    <!-- Request New Verification Email Form -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-envelope me-2"></i>Request New Verification Email
                            </h5>
                        </div>
                        <div class="card-body">
                            <form method="POST" action="{{ url_for('auth.user_management.resend_verification') }}">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="email" name="email" required 
                                           placeholder="Enter your email address">
                                    <div class="form-text">We'll send a new verification link to this email address.</div>
                                </div>
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-paper-plane me-2"></i>Send Verification Email
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 mt-4">
                        {% if current_user.is_authenticated %}
                            <a href="{{ url_for('auth.user_management.profile') }}" class="btn btn-primary">
                                <i class="fas fa-user me-2"></i>Go to Profile
                            </a>
                        {% else %}
                            <a href="{{ url_for('auth.user_management.login') }}" class="btn btn-primary">
                                <i class="fas fa-sign-in-alt me-2"></i>Sign In
                            </a>
                        {% endif %}
                        <a href="{{ url_for('main.landing') }}" class="btn btn-outline-secondary">
                            <i class="fas fa-home me-2"></i>Back to Home
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}