<!-- Copyright (C) 2025 iolaire mcfadden. -->
<!-- This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. -->
<!-- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. -->

<!-- Add Platform Modal -->
<div class="modal fade" id="addPlatformModal" tabindex="-1" aria-labelledby="addPlatformModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addPlatformModalLabel">Add Platform Connection</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="addPlatformForm">
                <!-- CSRF token handled by JavaScript -->
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="platformName" class="form-label">Connection Name <span
                                class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="platformName" name="name" required minlength="1"
                            maxlength="100" placeholder="e.g., My Pixelfed Account">
                        <div class="form-text">A friendly name for this connection (1-100 characters)</div>
                        <div class="invalid-feedback"></div>
                    </div>

                    <div class="mb-3">
                        <label for="platformType" class="form-label">Platform Type <span
                                class="text-danger">*</span></label>
                        <select class="form-select" id="platformType" name="platform_type" required>
                            <option value="">Select platform...</option>
                            <option value="pixelfed">Pixelfed</option>
                            <option value="mastodon">Mastodon</option>
                        </select>
                        <div class="form-text">Choose the type of ActivityPub platform</div>
                        <div class="invalid-feedback"></div>
                    </div>

                    <div class="mb-3">
                        <label for="instanceUrl" class="form-label">Instance URL <span
                                class="text-danger">*</span></label>
                        <input type="url" class="form-control" id="instanceUrl" name="instance_url" required
                            maxlength="500" placeholder="https://pixelfed.social">
                        <div class="form-text">The full URL of the instance (e.g., https://pixelfed.social)</div>
                        <div class="invalid-feedback"></div>
                    </div>

                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" name="username" maxlength="200"
                            placeholder="your_username">
                        <div class="form-text">Your username on this platform (optional)</div>
                        <div class="invalid-feedback"></div>
                    </div>

                    <div class="mb-3">
                        <label for="accessToken" class="form-label">Access Token <span
                                class="text-danger">*</span></label>
                        <input type="password" class="form-control" id="accessToken" name="access_token" required
                            minlength="10" placeholder="Your API access token">
                        <div class="form-text">Your API access token (minimum 10 characters)</div>
                        <div class="invalid-feedback"></div>
                    </div>

                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="testConnection" name="test_connection"
                                checked>
                            <label class="form-check-label" for="testConnection">
                                Test connection before saving
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                        Add Platform
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>