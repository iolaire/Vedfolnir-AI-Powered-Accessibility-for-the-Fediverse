<!-- Copyright (C) 2025 iolaire mcfadden. -->
<!-- This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. -->
<!-- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. -->

<!-- Bulk Actions Modal -->
<div class="modal fade" id="bulkActionsModal" tabindex="-1" aria-labelledby="bulkActionsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bulkActionsModalLabel">
                    <i class="bi bi-gear"></i> Bulk Job Actions
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <p class="text-muted">
                        <span id="selectedJobsCount">0</span> job(s) selected for bulk action.
                    </p>
                </div>
                
                <div class="mb-3">
                    <label for="bulkAction" class="form-label">Select Action</label>
                    <select class="form-select" id="bulkAction" onchange="updateBulkActionForm()">
                        <option value="">Choose an action...</option>
                        <option value="cancel">Cancel Selected Jobs</option>
                        <option value="priority">Change Priority</option>
                        <option value="restart">Restart Failed Jobs</option>
                        <option value="pause">Pause Jobs</option>
                        <option value="resume">Resume Jobs</option>
                    </select>
                </div>
                
                <!-- Cancel Action Form -->
                <div id="cancelActionForm" class="bulk-action-form">
                    <div class="mb-3">
                        <label for="cancelReason" class="form-label">Cancellation Reason</label>
                        <textarea class="form-control" id="cancelReason" rows="3" 
                                  placeholder="Enter reason for cancelling these jobs..."></textarea>
                    </div>
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i>
                        <strong>Warning:</strong> This action cannot be undone. Users will be notified of the cancellation.
                    </div>
                </div>
                
                <!-- Priority Action Form -->
                <div id="priorityActionForm" class="bulk-action-form">
                    <div class="mb-3">
                        <label for="newPriority" class="form-label">New Priority</label>
                        <select class="form-select" id="newPriority">
                            <option value="low">Low Priority</option>
                            <option value="normal" selected>Normal Priority</option>
                            <option value="high">High Priority</option>
                            <option value="urgent">Urgent Priority</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="priorityReason" class="form-label">Reason for Priority Change</label>
                        <textarea class="form-control" id="priorityReason" rows="2" 
                                  placeholder="Optional: Explain why priority is being changed..."></textarea>
                    </div>
                </div>
                
                <!-- Restart Action Form -->
                <div id="restartActionForm" class="bulk-action-form">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i>
                        <strong>Note:</strong> Only failed jobs can be restarted. Other jobs will be skipped.
                    </div>
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="resetRetryCount">
                            <label class="form-check-label" for="resetRetryCount">
                                Reset retry count for restarted jobs
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Pause/Resume Action Form -->
                <div id="pauseResumeActionForm" class="bulk-action-form">
                    <div class="mb-3">
                        <label for="pauseReason" class="form-label">Reason</label>
                        <textarea class="form-control" id="pauseReason" rows="2" 
                                  placeholder="Enter reason for this action..."></textarea>
                    </div>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i>
                        <strong>Note:</strong> Users will be notified of this action.
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="executeBulkAction" onclick="executeBulkAction()" disabled>
                    <i class="bi bi-play-circle"></i> Execute Action
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Bulk Action Confirmation Modal -->
<div class="modal fade" id="bulkActionConfirmModal" tabindex="-1" aria-labelledby="bulkActionConfirmModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bulkActionConfirmModalLabel">
                    <i class="bi bi-exclamation-triangle text-warning"></i> Confirm Bulk Action
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="bulkActionConfirmContent">
                    <!-- Confirmation content will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmBulkAction" onclick="confirmBulkAction()">
                    <i class="bi bi-check-circle"></i> Confirm Action
                </button>
            </div>
        </div>
    </div>
</div>