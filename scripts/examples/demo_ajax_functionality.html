<!DOCTYPE html>
<!-- Copyright (C) 2025 iolaire mcfadden. -->
<!-- This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. -->
<!-- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. -->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX Functionality Demo - Vedfolnir</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .demo-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .feature-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .code-block {
            background: #f1f3f4;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        .success-badge {
            background: #d4edda;
            color: #155724;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .api-endpoint {
            background: #e3f2fd;
            color: #0d47a1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 0.85rem;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">
                    <i class="bi bi-gear-fill text-primary"></i>
                    AJAX Functionality Implementation - Vedfolnir Admin Job Management
                </h1>
                
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill"></i>
                    <strong>Implementation Complete!</strong> The admin job management area now uses AJAX for Bulk Actions, System Maintenance, and Job History instead of just JavaScript modals.
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-4">
                <div class="demo-section">
                    <h3><i class="bi bi-gear text-warning"></i> Bulk Actions</h3>
                    <p class="text-muted">Dynamic bulk operations on multiple jobs with real-time feedback.</p>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-cloud-download"></i> AJAX Data Loading</h6>
                        <p class="small mb-2">Loads available jobs and actions dynamically:</p>
                        <div class="code-block">
GET <span class="api-endpoint">/admin/api/bulk-actions</span>
→ Returns jobs list + available actions
                        </div>
                        <span class="success-badge">✅ Implemented</span>
                    </div>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-lightning"></i> Real-time Execution</h6>
                        <p class="small mb-2">Executes bulk actions with progress feedback:</p>
                        <div class="code-block">
POST <span class="api-endpoint">/admin/api/bulk-actions/execute</span>
→ Processes selected jobs
→ Returns detailed results
                        </div>
                        <span class="success-badge">✅ Implemented</span>
                    </div>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-list-check"></i> Available Actions</h6>
                        <ul class="small mb-0">
                            <li>Cancel Selected Jobs</li>
                            <li>Set High Priority</li>
                            <li>Restart Failed Jobs</li>
                            <li>Add Admin Notes</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="demo-section">
                    <h3><i class="bi bi-tools text-danger"></i> System Maintenance</h3>
                    <p class="text-muted">Real-time system monitoring and maintenance operations.</p>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-activity"></i> Live System Metrics</h6>
                        <p class="small mb-2">Real-time system status and metrics:</p>
                        <div class="code-block">
GET <span class="api-endpoint">/admin/api/system-maintenance</span>
→ System status, metrics, maintenance log
                        </div>
                        <span class="success-badge">✅ Implemented</span>
                    </div>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-wrench"></i> Maintenance Actions</h6>
                        <p class="small mb-2">Execute system maintenance operations:</p>
                        <div class="code-block">
POST <span class="api-endpoint">/admin/api/system-maintenance/execute</span>
→ Executes maintenance action
→ Updates system status
                        </div>
                        <span class="success-badge">✅ Implemented</span>
                    </div>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-list-ul"></i> Available Actions</h6>
                        <ul class="small mb-0">
                            <li>Pause/Resume System</li>
                            <li>Clear Job Queue</li>
                            <li>Restart Services</li>
                            <li>View Maintenance Log</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="demo-section">
                    <h3><i class="bi bi-clock-history text-info"></i> Job History</h3>
                    <p class="text-muted">Paginated job history with filtering and search capabilities.</p>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-table"></i> Paginated Loading</h6>
                        <p class="small mb-2">Efficient pagination with filtering:</p>
                        <div class="code-block">
GET <span class="api-endpoint">/admin/api/job-history/{user_id}</span>
→ Paginated job history
→ Status filtering support
                        </div>
                        <span class="success-badge">✅ Implemented</span>
                    </div>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-funnel"></i> Dynamic Filtering</h6>
                        <p class="small mb-2">Filter jobs by status in real-time:</p>
                        <div class="code-block">
?status=completed
?status=failed
?status=cancelled
                        </div>
                        <span class="success-badge">✅ Implemented</span>
                    </div>
                    
                    <div class="feature-card">
                        <h6><i class="bi bi-info-circle"></i> Rich Job Details</h6>
                        <ul class="small mb-0">
                            <li>Job status and progress</li>
                            <li>Platform information</li>
                            <li>Results and statistics</li>
                            <li>Admin notes and actions</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12">
                <div class="demo-section">
                    <h3><i class="bi bi-code-slash"></i> Technical Implementation</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="bi bi-server"></i> Backend API Routes</h5>
                            <div class="feature-card">
                                <h6>New API Endpoints Created:</h6>
                                <ul class="small">
                                    <li><code>/admin/api/bulk-actions</code> - GET bulk actions data</li>
                                    <li><code>/admin/api/bulk-actions/execute</code> - POST execute bulk action</li>
                                    <li><code>/admin/api/system-maintenance</code> - GET system status</li>
                                    <li><code>/admin/api/system-maintenance/execute</code> - POST maintenance action</li>
                                    <li><code>/admin/api/job-history/{user_id}</code> - GET paginated job history</li>
                                </ul>
                            </div>
                            
                            <div class="feature-card">
                                <h6>Security Features:</h6>
                                <ul class="small">
                                    <li>CSRF token validation</li>
                                    <li>Admin role requirement</li>
                                    <li>Session-based authentication</li>
                                    <li>Input validation and sanitization</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <h5><i class="bi bi-filetype-js"></i> Frontend JavaScript</h5>
                            <div class="feature-card">
                                <h6>New JavaScript File:</h6>
                                <p class="small"><code>admin/static/js/admin_job_ajax.js</code></p>
                                <ul class="small">
                                    <li>Dynamic modal creation</li>
                                    <li>AJAX request handling</li>
                                    <li>Real-time UI updates</li>
                                    <li>Error handling and notifications</li>
                                </ul>
                            </div>
                            
                            <div class="feature-card">
                                <h6>Key Functions:</h6>
                                <ul class="small">
                                    <li><code>showBulkAdminActions()</code> - AJAX bulk actions modal</li>
                                    <li><code>showSystemMaintenanceModal()</code> - AJAX maintenance modal</li>
                                    <li><code>showPersonalJobHistory()</code> - AJAX job history modal</li>
                                    <li><code>executeBulkAction()</code> - Execute bulk operations</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12">
                <div class="demo-section">
                    <h3><i class="bi bi-check2-all"></i> Implementation Status</h3>
                    
                    <div class="row">
                        <div class="col-md-3">
                            <div class="text-center">
                                <i class="bi bi-check-circle-fill text-success" style="font-size: 2rem;"></i>
                                <h6 class="mt-2">API Routes</h6>
                                <span class="success-badge">✅ Complete</span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <i class="bi bi-check-circle-fill text-success" style="font-size: 2rem;"></i>
                                <h6 class="mt-2">JavaScript AJAX</h6>
                                <span class="success-badge">✅ Complete</span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <i class="bi bi-check-circle-fill text-success" style="font-size: 2rem;"></i>
                                <h6 class="mt-2">Template Integration</h6>
                                <span class="success-badge">✅ Complete</span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <i class="bi bi-check-circle-fill text-success" style="font-size: 2rem;"></i>
                                <h6 class="mt-2">Error Handling</h6>
                                <span class="success-badge">✅ Complete</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12">
                <div class="alert alert-info">
                    <h5><i class="bi bi-info-circle"></i> How to Test</h5>
                    <ol>
                        <li>Navigate to <code>http://127.0.0.1:5000/admin/job-management</code></li>
                        <li>Login with admin credentials</li>
                        <li>Click the <strong>"Bulk Actions"</strong> button to see AJAX-loaded job selection</li>
                        <li>Click the <strong>"System Maintenance"</strong> button to see real-time system metrics</li>
                        <li>Click the <strong>"Job History"</strong> button to see paginated job history</li>
                    </ol>
                    <p class="mb-0"><strong>Note:</strong> All modals now load their content dynamically via AJAX instead of being static JavaScript modals.</p>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12">
                <div class="demo-section">
                    <h3><i class="bi bi-arrow-up-right-circle"></i> Benefits of AJAX Implementation</h3>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="feature-card">
                                <h6><i class="bi bi-speedometer2 text-primary"></i> Performance</h6>
                                <ul class="small">
                                    <li>Faster page loads</li>
                                    <li>Real-time data updates</li>
                                    <li>Reduced server load</li>
                                    <li>Better user experience</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-card">
                                <h6><i class="bi bi-arrow-clockwise text-success"></i> Dynamic Content</h6>
                                <ul class="small">
                                    <li>Live job status updates</li>
                                    <li>Real-time system metrics</li>
                                    <li>Dynamic action availability</li>
                                    <li>Instant feedback</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-card">
                                <h6><i class="bi bi-shield-check text-warning"></i> Security</h6>
                                <ul class="small">
                                    <li>CSRF protection</li>
                                    <li>Session validation</li>
                                    <li>Role-based access</li>
                                    <li>Input sanitization</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>